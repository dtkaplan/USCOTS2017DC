---
title: "Wrangling for Instructors"
output: learnr::tutorial
runtime: shiny_prerendered
---

```{r setup, include=FALSE}
library(learnr)
library(tidyverse)
library(mosaic)
library(mosaicData)
library(ggplot2)
library(USCOTS2017DC)
library(ggformula)
library(DataComputing)

knitr::opts_chunk$set(echo = FALSE)
```

```{r datasetup}
set.seed(101)
Feet <- 
  KidsFeet %>%
  group_by(sex, domhand) %>%
  sample_n(2) %>%
  select(name, length, width, sex, domhand) %>% 
  arrange(desc(domhand)) %>% 
  ungroup()
```
```{r ref.label = "datasetup"}
# to use the previous block in the knitting of this document
```
## Wrangling 

Much of data science comes down to displaying data in a way that can be interpreted by a human. Such displays include graphics, summary tabulations, and models. Designing such displays is the intellectual work of data science.

Often, data come to you in arrangements and formats that are not directly suitable for display. Data wrangling is the process of transforming the data from the form in which they are given into a form suitable for display. As a shorthand for "data in a form suitable for display" I use the term *glyph-ready data*.

The wrangling approach we will use here involves three main principles:

1. The wrangling process is a sequence of relatively simple, building-block operations called "data verbs."
2. Each data verb takes input in a standard format and produces output in that same format, specifically, a tidy data table.
3. Data verbs are customized to a particular task by specifying arguments.

These principles, taken together, allow us to arrange the data verbs in diverse and creative ways. In the following, you'll see how individual data verbs work and a few common patterns for combining them.

## Data verbs

A data verb is a function that takes a data table as input and produces a data table as output. The set of frequently used data verbs is small. 

1. `arrange()`
2. `gather()` and `spread()`
2. `group_by()` and `ungroup()`
3. `filter()`
4. joins, e.g. `left_join()`
5. `mutate()`
6. `select()`
7. `summarise()`

Two other kinds of verbs are used *within* data verbs. These fall into two main classes:

- *reduction verbs* take a variable as input and return a single value as output. Example: `mean()`, `sd()`, `min()`, `max()`, etc.
- *transformation verbs* take variables as input and return another variable as output. Examples include arithmetic operations, comparison operations, text transformations, etc.

To illustrate the function of individual data verbs, we'll use a small data set, `Feet`. 

```{r}
Feet
```

In the examples to follow, the `Feet` data table will be "piped" as input to the data verb which will in turn produce a data table as output. The output will simply be printed to the display, but more usually a data verb's output is piped to the next step in a wrangling sequence.

## Select

The `select()` verb allows you to produce a new data table with only a subset of the variables in the input. For instance:

```{r select-1, exercise = TRUE, exercise.setup = "datasetup"}
Feet %>% select(name, domhand)
```

1. Add name
2. Use "negative" variable names

